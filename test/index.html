<!DOCTYPE html>
<html>
  <head>
    <script type="text/javascript" src="cc/extend.js"></script>
  </head>
  <body>
    <p>cc.extend test</p>
  </body>
  <script type="text/javascript">
    var logPane = document.getElementsByTagName('body')[0]
    function log(arg) {
      var newLine = document.createElement('div')
      newLine.innerHTML = arg
      logPane.appendChild(newLine)
    }

    var Animal = cc.Class.extend({
      type: "animal",
      init: function() { log("birth of " + this.type) },
      talk: function(word) { log("..." + word + "...") },
      hug: function() { log("none for you") }
    })

    cc.module('Cat').defines(function() {
        cc.global.Cat = Animal.extend({
          type: "cat",
          likes: { mice: 1, dogs: 0 },
          talk: function(word) {
            this.parent(word)
            log("hiss")
          }
        })
    })

    // hook into cc module class system to create class
    cc.module('HouseCat').parent('Cat').jClass({
      type: "friendly cat",
      talk: function(word) {
        log("meow")
        this.parent(word)
      }
    })

    var houseCat = new HouseCat
    log(houseCat instanceof Animal)

    var cat = new Cat
    cat.talk(cat.type + ': skrr')
    houseCat.talk(houseCat.type + ': mose')

    ++cat.likes.dogs
    log(houseCat.likes.dogs) // 1.. due to reference to same likes object

    Cat.inject({
      hug: function() {
        log(this.type + ": usually not")
        this.parent()
      }
    })
    houseCat.hug()
  </script>
</html>
